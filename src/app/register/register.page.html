<ion-header>
  <ion-toolbar>
    <ion-title>Registro</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content>
  <div class="register-container">
    <div class="header-text">
      <h1>Únete a adoptapp</h1>
      <p>Miles de animales están buscando un nuevo hogar...</p>
    </div>
    <form (ngSubmit)="onRegister()" #registerForm="ngForm">
      <!-- Campo Nombre -->
      <ion-item>
        <ion-label position="floating">Nombre</ion-label>
        <ion-input 
          type="text" 
          [(ngModel)]="name" 
          name="name" 
          required
        ></ion-input>
      </ion-item>

      <!-- Campo Correo Electrónico -->
      <ion-item class="email-item">
        <ion-label position="floating">Correo Electrónico</ion-label>
        <ion-input 
          type="email" 
          [(ngModel)]="email" 
          name="email" 
          required
          #emailInput="ngModel"
          [class.invalid]="emailInput.invalid && emailInput.touched"
        ></ion-input>
        <div *ngIf="emailInput.errors?.['required'] && emailInput.touched" class="error-message">
          Correo electrónico es requerido
        </div>
        <div *ngIf="emailInput.errors?.['email'] && emailInput.touched" class="error-message">
          Correo electrónico no válido
        </div>
      </ion-item>

      <!-- Campo Contraseña -->
      <ion-item>
        <ion-label position="floating">Contraseña</ion-label>
        <ion-input 
          type="password" 
          [(ngModel)]="password" 
          name="password" 
          required
          #passwordInput="ngModel"
          [class.invalid]="passwordInput.invalid && passwordInput.touched"
        ></ion-input>
        <div *ngIf="passwordInput.errors?.['required'] && passwordInput.touched" class="error-message">
          Contraseña es requerida
        </div>
      </ion-item>

      <!-- Campo Confirmar Contraseña -->
      <ion-item>
        <ion-label position="floating">Confirmar Contraseña</ion-label>
        <ion-input 
          type="password" 
          [(ngModel)]="confirmPassword" 
          name="confirmPassword" 
          required
          #confirmPasswordInput="ngModel"
          [class.invalid]="confirmPasswordInput.invalid && confirmPasswordInput.touched"
        ></ion-input>
        <div *ngIf="confirmPasswordInput.errors?.['required'] && confirmPasswordInput.touched" class="error-message">
          Confirmar contraseña es requerida
        </div>
        <div *ngIf="password !== confirmPassword && confirmPasswordInput.touched" class="error-message">
          Las contraseñas no coinciden
        </div>
      </ion-item>

      <!-- Campo Teléfono (Con formato chileno) -->
      <ion-item>
        <ion-label position="stacked">Teléfono (opcional)</ion-label>
        <div class="phone-container">
          <span class="phone-prefix">+569</span>
          <ion-input 
            type="tel" 
            [(ngModel)]="phone" 
            name="phone"
            #phoneInput="ngModel"
            placeholder="Número de teléfono"
            maxlength="8" 
          ></ion-input>
        </div>
        <div *ngIf="phone && !phone.match('^\\d{8}$')" class="error-message">
          El número de teléfono debe contener 8 dígitos.
        </div>
        <!-- Texto informativo debajo del campo de teléfono -->
        <p class="phone-info-text">El teléfono solo se usará para facilitar el contacto a otros usuarios cuando crees anuncios de animales.</p>
      </ion-item>

      <!-- Botón de registro -->
      <ion-button 
        expand="full" 
        type="submit" 
        [disabled]="registerForm.invalid || password !== confirmPassword"
      >
        Registrar
      </ion-button>
    </form>

    <!-- Botón para volver al login -->
    <ion-button 
      expand="full" 
      fill="outline" 
      (click)="goToLogin()"
    >
      Volver
    </ion-button>
  </div>
</ion-content>
